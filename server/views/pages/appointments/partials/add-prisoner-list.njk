{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "partials/showProfileLink.njk" import showProfileLink %}

{% macro addPrisonerList(prisoners) %}
    {% if prisoners.length > 1 %}
        {% set prisonersList = [] %}
        {% for prisoner in prisoners %}
            {% set prisonersList = (prisonersList.push([
                {
                    html: showProfileLink({
                    name: prisoner.name,
                    link: true
                })
                }, {
                    text: prisoner.number
                }, {
                    text: prisoner.cellLocation
                }
            ]), prisonersList) %}
        {% endfor %}

        {{ govukTable({
            attributes: {
                'data-module': 'moj-sortable-table',
                'data-qa': 'prisoners-list-table'
            },
            head: [
                {
                    text: "Name"
                },
                {
                    text: "Prison number"
                },
                {
                    text: "Location"
                }
            ],
            rows: prisonersList
        }) }}
    {% endif %}
{% endmacro %}
