{% extends "layout.njk" %}

{% macro labelAndValue(label, value) %}
  <div class="movement-slip__section__values">
    <div>
      <strong>{{ label }}</strong>
    </div>
    <span data-qa="{{ label.toLowerCase().replace(" ","-").replace(" ","-") }}">{{ value if value else "--" }}</span>
  </div>
{% endmacro %}

{% set pageTitle = "Appointments Management - Movement Authorisation" %}
{% set pageId = 'appointments-movement-slip-page' %}

{% block header %}
{% endblock %}

{% block beforeContent %}
  <span class="govuk-visually-hidden" id="{{ pageId }}"></span>
{% endblock %}

{% block content %}
  <div class="movement-slip">
    <h1 class="govuk-heading-l">Movement authorisation</h1>
    <div class="movement-slip__section">
      {{ labelAndValue('Name', (appointment.prisoners[0].firstName  + ' ' + appointment.prisoners[0].lastName) | toTitleCase) }}
      {{ labelAndValue('Prison number', appointment.prisoners[0].prisonerNumber) }}
      {{ labelAndValue('Cell location', appointment.prisoners[0].cellLocation) }}
    </div>

    <div class="movement-slip__section">
      {{ labelAndValue('Date and time', (appointment.startDate | formatDate('EEEE d MMMM yyyy')) + ' - ' + (appointment.startTime | formatDate('HH:mm')) + ' to ' + (appointment.endTime | formatDate('HH:mm'))) }}
      {{ labelAndValue('Moving to', appointment.internalLocation.userDescription) }}
      {{ labelAndValue('Reason', appointment.category.description) }}
      {{ labelAndValue('Comments', '') }}
    </div>

    {% if appointment.createdBy %}
        {% set createBy = appointment.createdBy | fullName | toTitleCase | initialiseName %}
    {% else %}
        {% set createBy = '[Unknown User]' %}
    {% endif %}

    <div class="movement-slip__section">
      {{ labelAndValue('Created by', createBy) }}
    </div>
  </div>
{% endblock %}

{% block footer %}
{% endblock %}
